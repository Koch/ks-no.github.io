<!DOCTYPE html>
<html>
  <head>
    <title>KS Fiks</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2019-08-06T12:34:51 CEST">
<title>MottakService v1 :: KS Fiks</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/hybrid.css" rel="stylesheet">
<link href="/css/featherlight.min.css" rel="stylesheet">
<link href="/css/auto-complete.css" rel="stylesheet">
<link href="/theme-original/style.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<style type="text/css">
  :root #header + #content > #left > #rlblock_left {
    display:none !important;
  }
</style>
<meta name="description" content="">


    
  </head>
  <body data-url="/svarut/integrasjon/mottaksservice-rest/">
    
      <div id="headermain"></div>
<nav id="sidebar" class="">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	
  
    <p><img src="/images/ks-logo.svg" width="30%"></p>

  


    </div>
        <div class="searchbox">
		    <label for="search-by"><i class="fa fa-search"></i></label>
		    <input data-search-input id="search-by" type="text" placeholder="">
		    <span data-search-clear=""><i class="fa fa-close"></i></span>
		</div>
		<script type="text/javascript" src="/js/lunr.min.js"></script>
		<script type="text/javascript" src="/js/auto-complete.js"></script>
		<script type="text/javascript">
        
            var baseurl = "\/";
        
		</script>
		<script type="text/javascript" src="/js/search.js"></script>
  </div>

      <ul class="topics">
            <li data-nav-id="/" class="dd-item">
            <a href="/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/fiks-platform/" class="dd-item haschildren
        ">
      <div>
      <a href="/fiks-platform/">Fiks-plattformen</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/fiks-platform/integrasjoner/" class="dd-item">
        <div>
          <a href="/fiks-platform/integrasjoner/">
            Integrasjonsutvikling
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/sikkerhet/" class="dd-item">
        <div>
          <a href="/fiks-platform/sikkerhet/">
            Sikkerhet og personvern
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/testmiljo/" class="dd-item">
        <div>
          <a href="/fiks-platform/testmiljo/">
            Testmilj√∏
          </a>
        </div>
    </li>
    <li data-nav-id="/fiks-platform/tjenester/" class="dd-item haschildren
        ">
      <div>
      <a href="/fiks-platform/tjenester/">Tjenester</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/fiks-platform/tjenester/dokumentlager/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/dokumentlager/">
            Dokumentlager
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester/fiksio/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/fiksio/">
            Fiks IO
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester/fullmakt/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/fullmakt/">
            Fullmakt
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester/innsyn/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/innsyn/">
            Innsyn
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester/minside/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/minside/">
            MinSide
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/fiks-platform/tjenester_under_utvikling/" class="dd-item haschildren
        ">
      <div>
      <a href="/fiks-platform/tjenester_under_utvikling/">Tjenester under utvikling</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/fiks-platform/tjenester_under_utvikling/audit/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester_under_utvikling/audit/">
            Audit
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester_under_utvikling/digisos/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester_under_utvikling/digisos/">
            Digisos
          </a>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="/fiks-platform/utviklingsmetodikk/" class="dd-item">
        <div>
          <a href="/fiks-platform/utviklingsmetodikk/">
            Utviklingsfilosofi
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/svarut/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/svarut/">SvarUt</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/svarut/edialog/" class="dd-item">
        <div>
          <a href="/svarut/edialog/">
            Edialog
          </a>
        </div>
    </li>
    <li data-nav-id="/svarut/integrasjon/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/svarut/integrasjon/">Integrasjon mot SvarUt</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/svarut/integrasjon/forsendelserestservicev1/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelserestservicev1/">
            ForsendelseRestServiceV1
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev1/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev1/">
            ForsendelseServiceV1
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev2/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev2/">
            ForsendelseServiceV2
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev3/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev3/">
            ForsendelseServiceV3
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev4/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev4/">
            ForsendelseServiceV4
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev5/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev5/">
            ForsendelseServiceV5
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev6/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev6/">
            ForsendelseServiceV6
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev7/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev7/">
            ForsendelseServiceV7
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev8/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev8/">
            ForsendelseServiceV8
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev9/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev9/">
            ForsendelseServiceV9
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelsesservicev10/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelsesservicev10/">
            ForsendelsesServiceV10
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelsesservicev11/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelsesservicev11/">
            ForsendelsesServiceV11
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/kodeeksempeldotnet/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/kodeeksempeldotnet/">
            Kodeeksempel .Net
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/kodeeksempeljava/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/kodeeksempeljava/">
            Kodeeksempel Java
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/kodeeksempelmottakerrest/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/kodeeksempelmottakerrest/">
            Kodeeksempel MottaksserviceV1
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/mottaksservice-rest/" class="dd-item active">
        <div>
          <a href="/svarut/integrasjon/mottaksservice-rest/">
            MottakService v1
          </a>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="/svarut/konfigurasjon-av-svarut/" class="dd-item">
        <div>
          <a href="/svarut/konfigurasjon-av-svarut/">
            Konfigurasjon av SvarUT
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/signeringstjeneste/" class="dd-item">
        <div>
          <a href="/svarut/signeringstjeneste/">
            Signeringstjeneste
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/forsendelser-og-sikkerhet/" class="dd-item">
        <div>
          <a href="/svarut/forsendelser-og-sikkerhet/">
            Sikkerhet
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/svarinn-mottakservice/" class="dd-item">
        <div>
          <a href="/svarut/svarinn-mottakservice/">
            SvarInn - Mottaksservice
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/svarut-svarinn-adressering/" class="dd-item">
        <div>
          <a href="/svarut/svarut-svarinn-adressering/">
            SvarUt - SvarInn adressering
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/testmiljo/" class="dd-item">
        <div>
          <a href="/svarut/testmiljo/">
            SvarUt Testmilj√∏
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/endringer/" class="dd-item">
        <div>
          <a href="/svarut/endringer/">
            SvarUt endringer
          </a>
        </div>
    </li>
        </ul>
    </li>



        <section id="shortcuts">
                <li class="" role=""><h3>More</h3><a href="https://github.com/ks-no/ks-no.github.io" target="_blank" rel="noopener"><i class='fa fa-github'></i> <label>Github repo</label></a></li>
                <li class="" role=""><a href="/index.xml" target="_blank" rel="noopener"><img src='/images/feed-icon-28x28.png'></a></li>
        </section>

    <hr />
    <li></li>
    
    </ul>

 <section id="footer">
    </section>
  </div>
</nav>



<section id="body">
<div id="overlay"></div>
<div class="padding highlightable">

  <div id="top-bar">
    
      
      
      
    <div id="top-github-link">
      <a class="github-link" href="https://github.com/ks-no/ks-no.github.io/edit/source/content/svarut/integrasjon/mottaksservice-REST.md" target="blank">
        <i class="fa fa-code-fork"></i>
        
      </a>
    </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
        <span id="sidebar-toggle-span">
          <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
            <i class="fa fa-bars"></i>
          </a>
        </span>
        <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
        <span class="links">
        










 <a href='/'>KS Fiks dokumentasjon</a> > <a href='/svarut/'>SvarUt</a> > <a href='/svarut/integrasjon/'>Integrasjon mot SvarUt</a> > MottakService v1

 

 

 

   
        </span>
    </div>
    
    
    <div class="progress">
        <div class="wrapper">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#tilgang">Tilgang</a></li>
<li><a href="#tjenester">Tjenester</a>
<ul>
<li><a href="#hentnyeforsendelser-get">hentNyeForsendelser (GET)</a></li>
<li><a href="#hentforsendelsefil-get">hentForsendelsefil (GET)</a></li>
<li><a href="#settforsendelsemottatt-post">settForsendelseMottatt (POST)</a></li>
<li><a href="#settforsendelsemottakfeilet-post">settForsendelseMottakFeilet (POST)</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
        </div>
    </div>
    

  </div>


<div id="body-inner">
  
    <h1>MottakService v1</h1>
  



    
    
    
    

<p>Her beskrives funksjonalitet for Mottaksservice V1. For √• sikre bakoverkompatibilitet for klientene s√• vil denne versjonen ikke endres.</p>

<p>Bruk av SvarInn til GeoIntegrasjon eksempel kode ligger her: <a href="https://github.com/ks-no/svarut-sak-mottak">https://github.com/ks-no/svarut-sak-mottak</a></p>

<h3 id="tilgang">Tilgang</h3>

<p>Tjenesten bruker HTTP Basic autentication med brukernavn og generert service-passord. Mottakersystem opprettes av KS-SvarUt administrator og service-passordet genereres av person med tilgang via <a href="https://svarut.ks.no/mottaker/">mottakersystem</a>-siden. Dersom autentiseringen feiler returneres HTTP-status 401 Unauthorized, og ukjent URL gir HTTP-status 404. Detaljerte feilmeldinger f√∏lger ogs√• ved feil.</p>

<h3 id="tjenester">Tjenester</h3>

<p>Forsendelser er tilgjengelig for direkte import til sakssystem i uendelig tid. Dersom forsendelsene markeres som permanent import feil g√•r forsendelsene videre i det normale l√∏pet med varsling i Altinn og til slutt printing.
Etter 2 timer vil det bli sendt varsel mail om manglende import 3 ganger om dagen.</p>

<p>Tjenestene er tilgjengelige via <a href="https://svarut.ks.no/tjenester/svarinn/">https://svarut.ks.no/tjenester/svarinn/</a></p>

<h4 id="hentnyeforsendelser-get">hentNyeForsendelser (GET)</h4>

<p><strong><a href="https://svarut.ks.no/tjenester/svarinn/mottaker/hentNyeForsendelser">https://svarut.ks.no/tjenester/svarinn/mottaker/hentNyeForsendelser</a></strong></p>

<p>Henter nye forsendelser for autentisert mottaker (basert p√• angitt mottaker). En vellykket foresp√∏rsel returnerer en liste av forsendelser (JSON). Dersom ingen forsendelser er tilgjengelig sendes en tom liste. Her f√∏lger et eksempel p√• en forsendelse.</p>

<div>

<pre>
[{
  "avsender": {
    "adresselinje1": "F√∏rste adresselinje",
    "adresselinje2": "Andre adresselinje",
    "adresselinje3": "Tredje adresselinje",
    "navn": "Tester testmann",
    "poststed": "Teststad",
    "postnr": "3333"
  },
  "mottaker": {
    "adresse1": "F√∏rste adresselinje",
    "adresse2": "Andre adresselinje",
    "adresse3": null,
    "postnr": "5258",
    "poststed": "Blomsterdalen",
    "navn": "Orgnavn",
    "land": "Norge",
    "orgnr": "999888777", //Eller fnr utfylt
    "fnr": "22334455566"
  },
  "id": "AAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA",
  "tittel": "En tittel",
  "date": 1412668736853, //millis since epoch
  "metadataFraAvleverendeSystem": {
    "sakssekvensnummer": 0,
    "saksaar": 0,
    "journalaar": 0,
    "journalsekvensnummer": 0,
    "journalpostnummer": 0,
    "journalposttype": "U",
    "journalstatus": null,
    "journaldato": null,
    "dokumentetsDato": null,
    "tittel": null,
    "saksBehandler": null,
    "ekstraMetadata": [
      {
        "key": null,
        "value": null
      }
    ]
  },
  "metadataForImport": {
    "sakssekvensnummer": 0,
    "saksaar": 0,
    "journalposttype": null,
    "journalstatus": "I",
    "dokumentetsDato": "2014-10-21T09:30:13.310+02:00", //ISO 8601
    "tittel": null
  },
  "status": "Akseptert",
  "niva": "3",
  "filmetadata": [
    {
      "filnavn": "dokument-d1c6d795.pdf",
      "mimetype": "application/pdf",
      "sha256hash": "caaa6a09e4b5ad571c596dd31fb93689d402834a1b92ff660abeb59c534c088e",
      "dokumentType": null,
      "size": 234563 # 0 hvis ukjent ellers st√∏rrelse i bytes.
    }
  ],
  "svarSendesTil": {
    "adresse1": "F√∏rste adresselinje",
    "adresse2": "Andre adresselinje",
    "adresse3": null,
    "postnr": "5258",
    "poststed": "Blomsterdalen",
    "navn": "Orgnavn",
    "land": "Norge",
    "orgnr": "999888777", //Eller fnr utfylt
    "fnr": "22334455566"
  },
  "svarPaForsendelse": "BBBBBB-BBBB-CCCC-BBBB-BBBBBBBBBB",
  "forsendelseType": "forsendelseType sett av avsender(heter dokumentType i v5 av servicen)",
  "eksternRef": "en ref fra avsender",
  "downloadUrl": "https://svarut.ks.no/tjenester/svarinn/forsendelse/AAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA"
}]
</pre>

Hvis du f√•r en zip fil i downloadUrlen, inneholder filmetadata mimetype p√• filene inne i zip fila.

</div>

<h4 id="hentforsendelsefil-get">hentForsendelsefil (GET)</h4>

<p>URL for √• hente forsendelser er oppgitt i <strong>downloadUrl</strong>-feltet i JSON-resultatet fra hentNyeForsendelser.</p>

<p>Henter filen for en gitt forsendelse. Kun √©n fil returneres. Hvis forsendelsen best√•r flere filer er de enten pakket i en samlet PDF eller en .zip fil. Husk at filene kan v√¶re store, vi anbefaler √• bruke en stream for mottak. MIME-type og filnavn st√•r i headeren. Filen er kryptert med den offentlige n√∏kkelen til mottakersystemet og m√• dekrypteres etter nedlasting.</p>

<table class="table table-condensed">

<thead>

<tr>

<th>Felt</th>

<th colspan="2">Beskrivelse</th>

<th>Validering</th>

</tr>

</thead>

<tbody>

<tr>

<td class="bold" rowspan="9">Forsendelsesid</td>

<td colspan="2">Identifikator som unikt identifiserer en forsendelse.</td>

<td>M√• v√¶re utfylt</td>

</tr>

</tbody>

</table>

<h4 id="settforsendelsemottatt-post">settForsendelseMottatt (POST)</h4>

<p><strong><a href="https://svarut.ks.no/tjenester/svarinn/kvitterMottak/forsendelse/{forsendelseid">https://svarut.ks.no/tjenester/svarinn/kvitterMottak/forsendelse/{forsendelseid</a>}</strong></p>

<p>Etter mottatt forsendelse kvitteres den ut fra importtjenesten. Forsendelsesstatus endres til lest slik at varsel ikke sendes til Altinn. Forsendelsen blir heller ikke sendt til print siden den er mottatt.</p>

<table class="table table-condensed">

<thead>

<tr>

<th>Felt</th>

<th colspan="2">Beskrivelse</th>

<th>Validering</th>

</tr>

</thead>

<tbody>

<tr>

<td class="bold" rowspan="9">Forsendelsesid</td>

<td colspan="2">Identifikator som unikt identifiserer en forsendelse.</td>

<td>M√• v√¶re utfylt</td>

</tr>

</tbody>

</table>

<h4 id="settforsendelsemottakfeilet-post">settForsendelseMottakFeilet (POST)</h4>

<p><strong><a href="https://svarut.ks.no/tjenester/svarinn/mottakFeilet/forsendelse/{forsendelseid">https://svarut.ks.no/tjenester/svarinn/mottakFeilet/forsendelse/{forsendelseid</a>}</strong></p>

<p>Hvis mottak av forsendelse feilet, kan dette meldes tilbake til SvarUt. Dette vil da framkomme i loggen til avsender.</p>

<table>

<thead>

<tr>

<th>Felt</th>

<th colspan="2">Beskrivelse</th>

<th>Validering</th>

</tr>

</thead>

<tbody>

<tr>
  <td class="bold">Forsendelsesid</td>
  <td colspan="2">Identifikator som unikt identifiserer en forsendelse.</td>
  <td>M√• v√¶re utfylt</td>
</tr>
<tr>
  <td class="bold">feilmelding</td>
  <td colspan="2">Tekst som sier hva som er feil.</td>
  <td>M√• v√¶re utfylt</td>
</tr>
<tr>
  <td class="bold">permanent</td>
  <td colspan="2">Kan v√¶re permanent eller middlertidig. 
Hvis feilen er ikke mulig √• fikse kan den markeres som permanent. Feilen som er markert permanent blir sent via annen kanal.Hvis forsendelsen er kun Digital og markert som permanentfeil vil den velge annen kanal og ikke blir varslet hvis forsendelsen ikke blir hentet. Normal varselmail for ikke hentede forsendelser via SvarInn blir ikke sendt.</td>
  <td>M√• v√¶re utfylt</td>
</tr>
</tbody>

</table>

<p>Json body:
<pre>
{
 &ldquo;feilmelding&rdquo;:&ldquo;En god feilmelding som mennesker kan lese&rdquo;,
 &ldquo;permanent&rdquo;:true
}
</pre>
Permanent true vil si at mottaker aldri vil kunne klare √• hente denne forsendelsen, den vil da g√• videre og pr√∏vd √• levert via andre kanaler.</p>


    
    
          <footer class=" footline" >
	
</footer>
  </div>
</div>

<div id="navigation">
</div>

</section>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
  <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>    

<script src="/js/clipboard.min.js"></script>
<script src="/js/featherlight.min.js"></script>
<script src="/js/html5shiv-printshiv.min.js"></script>

<script src="/js/modernizr.custom.71422.js"></script>
<script src="/js/docdock.js"></script>
<script src="/theme-original/script.js"></script>


    

    
    

    
  </body>
</html>