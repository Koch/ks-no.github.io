<!DOCTYPE html>
<html>
  <head>
    <title>KS Fiks</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2019-08-06T15:26:41 CEST">
<title>Innsyn :: KS Fiks</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/hybrid.css" rel="stylesheet">
<link href="/css/featherlight.min.css" rel="stylesheet">
<link href="/css/auto-complete.css" rel="stylesheet">
<link href="/theme-original/style.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<style type="text/css">
  :root #header + #content > #left > #rlblock_left {
    display:none !important;
  }
</style>
<meta name="description" content="">


    
  </head>
  <body data-url="/fiks-platform/tjenester/innsyn/">
    
      <div id="headermain"></div>
<nav id="sidebar" class="">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	
  
    <p><img src="/images/ks-logo.svg" width="30%"></p>

  


    </div>
        <div class="searchbox">
		    <label for="search-by"><i class="fa fa-search"></i></label>
		    <input data-search-input id="search-by" type="text" placeholder="">
		    <span data-search-clear=""><i class="fa fa-close"></i></span>
		</div>
		<script type="text/javascript" src="/js/lunr.min.js"></script>
		<script type="text/javascript" src="/js/auto-complete.js"></script>
		<script type="text/javascript">
        
            var baseurl = "\/";
        
		</script>
		<script type="text/javascript" src="/js/search.js"></script>
  </div>

      <ul class="topics">
            <li data-nav-id="/" class="dd-item">
            <a href="/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/fiks-platform/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/fiks-platform/">Fiks-plattformen</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/fiks-platform/integrasjoner/" class="dd-item">
        <div>
          <a href="/fiks-platform/integrasjoner/">
            Integrasjonsutvikling
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/sikkerhet/" class="dd-item">
        <div>
          <a href="/fiks-platform/sikkerhet/">
            Sikkerhet og personvern
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/testmiljo/" class="dd-item">
        <div>
          <a href="/fiks-platform/testmiljo/">
            Testmilj√∏
          </a>
        </div>
    </li>
    <li data-nav-id="/fiks-platform/tjenester/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/fiks-platform/tjenester/">Tjenester</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/fiks-platform/tjenester/dokumentlager/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/dokumentlager/">
            Dokumentlager
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester/fiksio/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/fiksio/">
            Fiks IO
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester/fullmakt/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/fullmakt/">
            Fullmakt
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester/innsyn/" class="dd-item active">
        <div>
          <a href="/fiks-platform/tjenester/innsyn/">
            Innsyn
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester/minside/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/minside/">
            MinSide
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/fiks-platform/tjenester_under_utvikling/" class="dd-item haschildren
        ">
      <div>
      <a href="/fiks-platform/tjenester_under_utvikling/">Tjenester under utvikling</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/fiks-platform/tjenester_under_utvikling/audit/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester_under_utvikling/audit/">
            Audit
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester_under_utvikling/digisos/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester_under_utvikling/digisos/">
            Digisos
          </a>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="/fiks-platform/utviklingsmetodikk/" class="dd-item">
        <div>
          <a href="/fiks-platform/utviklingsmetodikk/">
            Utviklingsfilosofi
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/svarut/" class="dd-item haschildren
        ">
      <div>
      <a href="/svarut/">SvarUt</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/svarut/edialog/" class="dd-item">
        <div>
          <a href="/svarut/edialog/">
            Edialog
          </a>
        </div>
    </li>
    <li data-nav-id="/svarut/integrasjon/" class="dd-item haschildren
        ">
      <div>
      <a href="/svarut/integrasjon/">Integrasjon mot SvarUt</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/svarut/integrasjon/forsendelserestservicev1/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelserestservicev1/">
            ForsendelseRestServiceV1
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev1/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev1/">
            ForsendelseServiceV1
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev2/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev2/">
            ForsendelseServiceV2
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev3/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev3/">
            ForsendelseServiceV3
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev4/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev4/">
            ForsendelseServiceV4
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev5/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev5/">
            ForsendelseServiceV5
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev6/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev6/">
            ForsendelseServiceV6
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev7/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev7/">
            ForsendelseServiceV7
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev8/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev8/">
            ForsendelseServiceV8
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev9/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev9/">
            ForsendelseServiceV9
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelsesservicev10/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelsesservicev10/">
            ForsendelsesServiceV10
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelsesservicev11/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelsesservicev11/">
            ForsendelsesServiceV11
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/kodeeksempeldotnet/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/kodeeksempeldotnet/">
            Kodeeksempel .Net
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/kodeeksempeljava/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/kodeeksempeljava/">
            Kodeeksempel Java
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/kodeeksempelmottakerrest/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/kodeeksempelmottakerrest/">
            Kodeeksempel MottaksserviceV1
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/mottaksservice-rest/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/mottaksservice-rest/">
            MottakService v1
          </a>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="/svarut/konfigurasjon-av-svarut/" class="dd-item">
        <div>
          <a href="/svarut/konfigurasjon-av-svarut/">
            Konfigurasjon av SvarUT
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/signeringstjeneste/" class="dd-item">
        <div>
          <a href="/svarut/signeringstjeneste/">
            Signeringstjeneste
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/forsendelser-og-sikkerhet/" class="dd-item">
        <div>
          <a href="/svarut/forsendelser-og-sikkerhet/">
            Sikkerhet
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/svarinn-mottakservice/" class="dd-item">
        <div>
          <a href="/svarut/svarinn-mottakservice/">
            SvarInn - Mottaksservice
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/svarut-svarinn-adressering/" class="dd-item">
        <div>
          <a href="/svarut/svarut-svarinn-adressering/">
            SvarUt - SvarInn adressering
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/testmiljo/" class="dd-item">
        <div>
          <a href="/svarut/testmiljo/">
            SvarUt Testmilj√∏
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/endringer/" class="dd-item">
        <div>
          <a href="/svarut/endringer/">
            SvarUt endringer
          </a>
        </div>
    </li>
        </ul>
    </li>



        <section id="shortcuts">
                <li class="" role=""><h3>More</h3><a href="https://github.com/ks-no/ks-no.github.io" target="_blank" rel="noopener"><i class='fa fa-github'></i> <label>Github repo</label></a></li>
                <li class="" role=""><a href="/index.xml" target="_blank" rel="noopener"><img src='/images/feed-icon-28x28.png'></a></li>
        </section>

    <hr />
    <li></li>
    
    </ul>

 <section id="footer">
    </section>
  </div>
</nav>



<section id="body">
<div id="overlay"></div>
<div class="padding highlightable">

  <div id="top-bar">
    
      
      
      
    <div id="top-github-link">
      <a class="github-link" href="https://github.com/ks-no/ks-no.github.io/edit/source/content/fiks-platform/tjenester/innsyn.md" target="blank">
        <i class="fa fa-code-fork"></i>
        
      </a>
    </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
        <span id="sidebar-toggle-span">
          <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
            <i class="fa fa-bars"></i>
          </a>
        </span>
        <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
        <span class="links">
        










 <a href='/'>KS Fiks dokumentasjon</a> > <a href='/fiks-platform/'>Fiks-plattformen</a> > <a href='/fiks-platform/tjenester/'>Tjenester</a> > Innsyn

 

 

 

   
        </span>
    </div>
    
    
    <div class="progress">
        <div class="wrapper">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#hvordan-tar-man-i-bruk-fiks-innsyn">Hvordan tar man i bruk Fiks Innsyn?</a></li>
<li><a href="#hvordan-virker-fiks-innsyn">Hvordan virker Fiks Innsyn?</a></li>
<li><a href="#uvikling-av-integrasjoner-som-leverer-data-til-innsyn">Uvikling av integrasjoner som leverer data til Innsyn:</a>
<ul>
<li><a href="#indeksering">Indeksering</a></li>
<li><a href="#eksponering-av-meldinger">Eksponering av meldinger</a></li>
<li><a href="#versjonering">Versjonering</a>
<ul>
<li><a href="#sletting">Sletting</a></li>
<li><a href="#h√•ndtering-av-filer">H√•ndtering av filer</a></li>
</ul></li>
</ul></li>
<li><a href="#uvikling-av-integrasjoner-for-√•-s√∏ke-i-innsyn">Uvikling av integrasjoner for √• s√∏ke i innsyn</a>
<ul>
<li><a href="#s√∏ketjeneste">S√∏ketjeneste</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
        </div>
    </div>
    

  </div>


<div id="body-inner">
  
    <h1>Innsyn</h1>
  



    
    
    
    

<p>Norske kommuner har mengder av informasjon om sine innbyggere. Denne informasjonen er spredd rundt i arkiver, fagsystemer, dokumentlagre og eksterne skyl√∏sninger. Fiks Innsyn lagrer metadata som beskriver denne informasjonen, og gj√∏r den tilgjengelig for innbyggeren via en kraftig s√∏kemotor.</p>

<h3 id="hvordan-tar-man-i-bruk-fiks-innsyn">Hvordan tar man i bruk Fiks Innsyn?</h3>

<p>En kommune kan bruke Fiks Innsyn for √• gj√∏re kommunal informasjon (forsendelser, byggesaker, eiendommer, fakturaer osv) tilgjengelig for innbyggere, endten p√• minside.kommune.no eller p√• kommunens eksisterende minside l√∏sning.
<img src="/images/innsyn_konfigurasjon_integrasjoner.png" alt="minside_integrasjoner" title="Innsyn integrasjoner" /></p>

<p>Uansett er f√∏rste steg √• s√∏rge for metadata som beskriver informasjonen finnes i s√∏kemotoren. Dette gj√∏res ved √• legge til integrasjoner i konfigurasjonen av <a href="https://forvaltning.fiks.ks.no/fiks-konfigurasjon/tjenester/innsyn">innsyntjenesten</a> p√• forvaltning.fiks.ks.no. Hver av disse integrasjonene representerer en datakilde. Dette kan v√¶re &ldquo;n√∏kkelklare&rdquo; integrasjoner levert av KS eller tredjepartsleverand√∏rer, for eksempel forsendelser fra SvarUt eller byggesaker fra GeoMatikk, eller integrasjoner kommunen lager selv. I skjermbildet over har en kommune lagt til SvarUt integrasjonen som kilde for innsyn, som gj√∏r at alle forsendelser fra SvarUt-avsendere spesifisert i integrasjonens konfigurasjon blir tilgjengelig i &ldquo;Post fra kommunen&rdquo; p√• minside.kommune.no.</p>

<p>Hvis kommunen benytter minside.kommune.no er n√• alt klart: innloggede innbyggere vil se sine meldinger i &ldquo;Post fra kommunen&rdquo; og andre innsyn-drevede tjenester.</p>

<p>Hvis kommunen benytter en egen minside-l√∏sning m√• ogs√• s√∏ket mot Fiks Innsyn gj√∏res via en integrasjon, som legges til p√• samme m√•te som datakilde-integrasjonene over. I noen tilfeller vil det finnes n√∏kkelklare leverand√∏r-integrasjoner for dette, i andre m√• kommunen lage en egen integrasjon som leverand√∏ren kan benytte. Kontakt leverand√∏r for √• avklare dette.</p>

<h3 id="hvordan-virker-fiks-innsyn">Hvordan virker Fiks Innsyn?</h3>

<p><img src="https://www.lucidchart.com/publicSegments/view/db355c1a-7955-4c4a-8ccf-ccd7e64424fd/image.png" alt="minside_sok" title="Innsyn" />
Tjenesten best√•r av tre hovedkomponenter:</p>

<ul>
<li><em>Innsyn-webapplikasjoner</em>, et sett med SPA (Single Page Applications) p√• minside.kommune.no som innbyggere benytter for √• s√∏ke i innsynsdatabasen. Eksempler er &ldquo;Post fra kommunen&rdquo;, &ldquo;Byggesaker&rdquo;, osv.</li>
<li><em>Innsyn-s√∏k</em>, s√∏kemotoren som utgj√∏r back-end for webappliasjonene. St√∏tter friteksts√∏k og score-rangerte resultater.</li>
<li><em>Innsyn-indexer</em>, en indekseringstjeneste som integrasjoner kan benytte for √• laste opp metadata om informasjonen kommunen sitter p√•: hendelser, fakturaer, saker, journalposter, forsendelser, osv.<br /></li>
</ul>

<p>S√∏k i innsyn gj√∏res via applikasjonene p√• minside.kommune.no, eller direkte via et REST grensesnitt. Uansett baserer autentisering seg p√• innlogging via ID-Porten. En autentisert innbygger autoriserers for √• lese en melding p√• en av tre m√•ter:</p>

<ul>
<li>Meldingen er eksponert for innbyggerens f√∏dselsnummer</li>
<li>Innbyggeren har rollene &ldquo;post/arkiv&rdquo; eller &ldquo;kommunale tjenester&rdquo; i Altinn for organisasjonsnummeret meldingen er eksponert for</li>
<li>Innbyggeren er markert som eier av matrikkelenheten meldingen er eksponert for, endten direkte eller via organisasjon.</li>
</ul>

<p>S√∏ket er i hovedsak basert p√• fri-tekst, og vil ogs√• da kompenserer for stavefeil, b√∏yeform eller orddeling. Noe filtrering er mulig (for eksempel p√• dato, avsender-organisasjon osv). Alle s√∏k er ogs√• filtrert p√• innloggingsniv√•. Et s√∏k gjort med innlogging p√• niv√• tre vil ikke returnere grupper som er satt til niv√• fire, uavhengig av om disse gruppene traff p√• s√∏ket. Hvilket innloggingsniv√• som kreves for √• se hver enkelt melding er bestemt av interasjonen som indekserte meldingen i Innsyn.</p>

<p>S√∏keresultatet scores og sorteres basert p√• relevans: nye meldinger scores h√∏yere enn gamle, uleste dokumenter h√∏yere enn de du har lest, ubetalte faktura h√∏yere enn de du har betalt, og s√• videre. Det er ogs√• mulig √• f√• resultatet sortert p√• dato.</p>

<p>S√∏kemotoren inneholder utelukkende metadata, ikke selve dokumentet. Om meldingen skal peke til et dokument, bilde eller annen fil gj√∏res dette i form av en lenke: denne kan for eksempel peke til en fil i <a href="/fiks-platform/tjenester/dokumentlager/">Fiks Dokumentlager</a>, en sak i et kommunalt filarkiv, eller en annen tjeneste. S√• lenge disse st√∏tter innlogging gjennom ID-Porten vil nedlastingen oppleves s√∏ml√∏st av innbygger.</p>

<h3 id="uvikling-av-integrasjoner-som-leverer-data-til-innsyn">Uvikling av integrasjoner som leverer data til Innsyn:</h3>

<p>Indeksering av dokumenter gj√∏res via <a href="https://editor.swagger.io/?url=https://ks-no.github.io/api/innsyn-index-api-v1.json">Innsyn-Index api</a>. F√∏rst noen grunnleggende prinsipper for forvalting av meldinger i innsyn:</p>

<ul>
<li><em>Alle dokumenter eies av en Fiks Organisasjon.</em> I de fleste tilfeller vil dette v√¶re en kommune eller en fylkeskommune. Det er denne organisasjonen som autoriserer indeksering av data, og har rett til √• oppdatere eller slette disse, enten direkte eller via tredjepart.</li>
<li><em>Integrasjoner m√• autoriseres for √• indeksere data p√• vegne av en av organisasjon.</em> Dette gj√∏res gjennom √• tildele &ldquo;Innsyn Index&rdquo; privilegiet til integrasjonen i Fiks Konfigurasjon. N√∏kkelklare integrasjoner vil automatisk bli tildelt de n√∏dvendige privilegiene n√•r de blir lagt til i Innsyn konfigurasjonen.</li>
<li><em>Hver integrasjon styrer dokumentene de har lastet opp p√• vegne av organisasjonen.</em> Dvs. at integrasjon A ikke kan slette eller oppdatere dokumenter lastet opp av integrasjon B. Merk at tjenesteadministrator n√•r som helst kan slette meldinger gjennom Fiks Konfigurasjon, uavhengig av hvilke integrasjon som har indeksert meldingene.</li>
</ul>

<h4 id="indeksering">Indeksering</h4>

<p>Indekseringstjenesten lar integrasjoner opprette meldinger, eller fjerne / endre meldinger som alt er opprettet. Hver melding har en meldingId som settes av integrasjonen. Hvis man indekserer to meldinger p√• samme melding-id vil den f√∏rste meldingen bli overskrevet.</p>

<p>N√•r man lager en integrasjon mot indekseringstjenesten er det viktig √• v√¶re bevisst p√• at Innsyn b√∏r betraktes som en cache: man b√∏r ikke forvente at meldingene man laster opp vil ligge der til evig tid: en forvalter med admin-privilegier p√• innsyn-tjenesten kan for eksempel n√•r som helst slette meldinger. Hvis man √∏nsker en robust l√∏sning er det derfor viktig at man st√∏tter <em>replay</em>: muligheten til √• re-indexere alle meldinger til Innsyn.</p>

<p>De vanlige <a href="/fiks-platform/sikkerhet/">autentiseringsreglene</a> for Fiks-plattformen gjelder for denne tjenesten, men i tilegg m√• integrasjonen har rett til √• indeksere p√• vegne av  <em>fiks organisasjonen</em> som er satt som eier den aktuelle meldingen.</p>

<p>Endepunktet st√∏tter batch av opptil 5000 elementer, og integrasjonsutviklere anbefales √• benytte denne funksjonaliteten, da det skaper vesentlig mindre trykk p√• systemet. Merk at indeksering ikke er en atomisk transaksjon: deler av elementene i en batch kan bli indeksert selv om andre feiler.</p>

<p>En indekseringsoperasjon kan ha f√∏lgende utfall:</p>

<ul>
<li><em>200</em>. Meldingene ble indexert. Merk at det kan ta noe tid f√∏r disse blir synlige for et s√∏k.</li>
<li><em>4XX</em>. Et problem p√• klientsiden f√∏rte til at meldingene ikke kan behandles. Ved 4XX feil vil ingen av meldingene i batchen bli skrevet til Innsyn.

<ul>
<li>Hvis deserialisering av json mislykkes f√•r man en ren 400 BAD REQUEST. Dette indikerer som oftest at json modellen i foresp√∏rselen ikke stemmer med api-spec.</li>
<li>Hvis deserialisering var vellykket men en eller flere meldinger ikke validerte f√•r man en meldinger som feilet, og en beskrivelse av hvorfor. Dette indikerer som oftest at et p√•krevet feil mangeler, eller at det har en ugyldig verdi. Dette b√∏r utbedres, eller meldingene med ugyldige verdier b√∏r fjernes f√∏r man pr√∏ver igjen.</li>
</ul></li>
<li><em>5XX</em>. Indeksering av batchen feilet. Dette betyr som oftest at noe gikk galt p√• server-siden. Noen av meldingene i batchen kan likevel v√¶re indeksert. Man b√∏r derfor fors√∏ke √• indeksere alle meldingene p√• nytt.</li>
</ul>

<p>Gjennomf√∏ring av batch-operasjoner skjer synkront fra st√•stedet til en bruker av tjenesten: responsen blir ikke sendt f√∏r batchen er gjennomf√∏rt. Dermed vil man kunne vite at en gruppe opprettet i batch 1 eksisterer n√•r batch 2 gjennomf√∏res, s√• lenge disse utf√∏res sekvensielt.</p>

<h4 id="eksponering-av-meldinger">Eksponering av meldinger</h4>

<p><em>Eksponert for</em> i en indekseringsforesp√∏rsel angir hvem som skal kunne se meldingen. Dette kan ha en av f√∏lgende verdier:</p>

<ul>
<li><em>f√∏dselsnummer</em>: Meldingen blir tilgjengelig for innbyggeren som er autentisert med det spesifiserte f√∏dselsnummeret.</li>
<li><em>organisasjonsnummer</em>: Meldingen blir tilgjengelig for innbyggere som innehar rollene &ldquo;post/arkiv&rdquo; eller &ldquo;kommunale tjenester&rdquo; i Altinn p√• det spesifiserte organisasjonsnummeret.</li>
<li><em>matrikkelnummer</em>: Meldingen blir tilgjengelig for personer som er f√∏rt som eiere av matrikkelenheten med det spesifiserte nummeret, eller som innehar rollene &ldquo;post/arkiv&rdquo; eller &ldquo;kommunale tjenester&rdquo; for en organisasjon som er f√∏rt som eier av den aktuelle matrikkelenheten. Endringer i eierskap vil automatisk bli tatt hensyn til, uten at reindeksering av meldingen er n√∏dvendig.</li>
</ul>

<p>Det er viktig at man har et bevisst forhold til hvem meldinger eksponeres for, spesielt n√•r man eksponerer for en matrikkelenhet, da endringer i eierskap vil medf√∏re at nye personer f√•r tilgang til meldingen. Man b√∏r derfor aldri eksponere sensitive data via denne metoden.</p>

<h4 id="versjonering">Versjonering</h4>

<p>Over tid vil json-modellen for en melding endrer seg. Innsyn l√∏ser dette ved at alle metadatamodellene er versjonert, for eksempel som Forsendelse V1, Forsendelse V2 osv. Alle tidligere versjoner er st√∏ttet, s√• om din integrasjon indekserer V1 av forsendelser i dag vil dette fortsette √• virke selv om V2 blir gjort tilgjengelig.</p>

<p>Hvis man √∏nsker √• oppgradere eksisterende meldinger til ny versjon, for eksempel for √• benytte felt som er lagt til i oppdateringen, gj√∏res dette gjennom <em>replay</em>; alle meldinger re-indekseres p√• eksisterende meldingId med ny versjon av metadata.</p>

<h5 id="sletting">Sletting</h5>

<p>Indekserte meldinger kan fjernes ved √• benytte endepunkt for sletting. Her gjelder de samme reglene som over: en integrasjon m√• v√¶re autorisert for √• handle p√• vegne av en ansvarlig organisasjon for at sletting kan gjennomf√∏res, og en integrasjon kan bare slette meldinger den selv har indeksert.</p>

<p>Merk at sletting p√• samme m√•te som indeksering ikke gjennomf√∏res i en atomisk transaksjon: deler av meldingene i batchen kan bli slettet selv om andre feiler.</p>

<h5 id="h√•ndtering-av-filer">H√•ndtering av filer</h5>

<p>Mange meldingstyper vil referere til filer i eksterne systemer, som for eksempel dokumenter i &ldquo;Forsendelse&rdquo; typen. Innsyn har i seg selv ikke noe forhold til bin√¶re filer, og betrakter dem utelukkende som en lenke. Hvis filene allerede er tilgjengelig i et ID-Porten kompatibelt filarkiv trenger man ikke √• laste disse opp p√• nytt, hvis man ikke har en slik tjeneste fra f√∏r kan man benytte Fiks Dokumentlager til dette.</p>

<h3 id="uvikling-av-integrasjoner-for-√•-s√∏ke-i-innsyn">Uvikling av integrasjoner for √• s√∏ke i innsyn</h3>

<h4 id="s√∏ketjeneste">S√∏ketjeneste</h4>

<p>Hvis kommunen benytter minside.kommune.no er det ikke behov for √• utvikle noen egne integrasjoner for s√∏k, men det kan ofte v√¶re aktuelt √• s√∏ke i innsyn fra kommunens eksisterende l√∏sning, endten egenutviklet eller kj√∏pt via leverand√∏r. I disse tilfellene m√• s√∏ket skje gjennom en integrasjon mot <a href="https://editor.swagger.io/?url=https://ks-no.github.io/api/innsyn-sok-api-v1.json">Innsyn-S√∏k api</a>.</p>

<p>Integrasjonen som skal utf√∏re dette s√∏ket m√• benytte <a href="/fiks-platform/integrasjoner/">integrasjon-person</a> autentisering, dvs at de m√• fremvise den innloggede innbyggers ID-Porten token i kombinasjon med integrasjonId og Integrasjonpassord. I tillegg m√• integrasjonen ha &ldquo;innsyn s√∏k&rdquo; privilegiet p√• den aktuelle Fiks-organisasjonen (tildelse via Innsyn konfigurasjon p√• forvaltning.fiks.ks.no). S√∏keresultatet vil v√¶re begrenset til meldinger autorisert for den innloggede personen og eid av den aktuelle Fiks-organisasjonen.</p>

<p>Det er ogs√• viktig √• merke seg at man n√•r man utf√∏rer et s√∏k har mulighet til √• spesifisere hvilke versjoner av meldingstyper man st√∏tter. Det anbefales √• benyttes seg av dette for √• unng√• overraskelser: hvis man ikke gj√∏r det vil man f√• det som til enhver tid er nyeste versjon, med oppgraderinger uten advarsel. Se api-spec for detaljer.</p>


    
    
          <footer class=" footline" >
	
</footer>
  </div>
</div>

<div id="navigation">
</div>

</section>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
  <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>    

<script src="/js/clipboard.min.js"></script>
<script src="/js/featherlight.min.js"></script>
<script src="/js/html5shiv-printshiv.min.js"></script>

<script src="/js/modernizr.custom.71422.js"></script>
<script src="/js/docdock.js"></script>
<script src="/theme-original/script.js"></script>


    

    
    

    
  </body>
</html>